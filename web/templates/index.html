<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://unpkg.com/cytoscape/dist/cytoscape.min.js"></script>
    <title>SAFE analysis for the miniTurbo results</title>
    <style>
        #tooltip {
            position: absolute;
            display: none;
            background-color: white;
            border: 1px solid black;
            padding: 5px;
            border-radius: 5px;
            pointer-events: none;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <a href="#">Home</a>
        <a href="#">About</a>
        <a href="#">Services</a>
        <a href="#">Contact</a>
    </div>
    <div class="main-content">
        <div id="cy" style="width: 100%; height: 100vh;"></div>
        <div id="tooltip"></div>
        <script>
            fetch('{{ url_for("static", filename="mTb_network.cyjs") }}')
            .then(response => response.json())
            .then(data => {
                var cy = cytoscape({
                    container: document.getElementById('cy'),
                    elements: data.elements,
                    style: [
                        { selector: 'node', style: {'background-color': 'data(node_color)', 'label': 'data(name)', 'width': 'data(node_size)', 'height': 'data(node_size)', 'text-valign': 'center', 'text-halign': 'center'}  },
                        { selector: 'edge', style: {'width': 3, 'line-color': '#ccc', 'target-arrow-color': '#ccc', 'target-arrow-shape': 'triangle', 'line-style': 'data(edge_line_type)'} },
                        { selector: 'edge[edge_line_type = "solid"]', style: {'line-style': 'solid'}},
                        { selector: 'edge[edge_line_type = "Equal Dash"]', style: {'line-style': 'dashed', 'line-dash-pattern': [6, 3]}}
                    ],
                    layout: { name: 'preset' }
                });

                cy.on('mouseover', 'node', function(evt) {
                    var node = evt.target;
                    document.getElementById('tooltip').innerHTML = node.data('name');
                    document.getElementById('tooltip').style.display = 'block';
                    document.getElementById('tooltip').style.left = evt.originalEvent.clientX + 15 + 'px';
                    document.getElementById('tooltip').style.top = evt.originalEvent.clientY + 15 + 'px';
                });

                cy.on('mouseout', 'node', function(evt) {
                    document.getElementById('tooltip').style.display = 'none';
                });
            });
        </script>
    </div>
</div>
</body>
</html>
